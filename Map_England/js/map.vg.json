{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "England and Wales Average Housing Prices 2017",
  "width": 800,
  "height": 600,
  "params": [  
    {  
      "name": "zoom_level",  
      "value": 6000,  
      "bind": {  
        "input": "range",  
        "min": 4500,  
        "max": 30000,  
        "step": 100,  
        "name": "Zoom: "  
      }  
    },  
    {  
      "name": "center_to",  
      "value": [-2.179404, 53.002666],
      "bind": {  
        "input": "select",  
        "options": [  
          [-0.118092, 51.509865],  
          [-2.983333, 53.400002],
          [-2.179404, 53.002666]   
        ],  
        "labels": ["London", "Liverpool", "Centre"],  
        "name": "Map Centre: "  
      }  
    } 
  ],
  "projection": {
    "type": "azimuthalEqualArea",
    "center": {"expr": "center_to"},
    "scale": {"expr": "zoom_level"} 
    },
  "data": {
    "url": "https://raw.githubusercontent.com/jlea0003/Assignment2Homework/master/Map_England/js/Counties_and_Unitary_Authorities_(May_2021)_UK_BUC.json",
    "format": {
      "type": "topojson",
      "feature": "Counties_and_Unitary_Authorities_(May_2021)_UK_BUC"
    }
  },
  "transform": [
    {
      "lookup": "properties.CTYUA21NM",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/jlea0003/Assignment2Homework/master/Map_England/data/price_paid_2017.csv"
        },
        "key": "Unique",
        "fields": [
          "Average",
          "Detached",
          "Semi-Detached",
          "Terraced",
          "Flats",
          "Other"
        ]
      }
    }
  ],
  "mark": {"type": "geoshape", "stroke": "gray"},
  "encoding": {
    "color": {
      "field": "Average",
      "type": "quantitative",
      "title": "Average House Price",
      "scale": {
        "type": "threshold",
        "domain": [200000, 300000, 400000, 600000, 800000, 1000000,2000000, 3000000],
          "range": [
            "#ffffe5",
            "#fff7bc",
            "#fee391",
            "#fec44f",
            "#fe9929",
            "#ec7014",
            "#cc4c02",
            "#993404",
            "#662506"
          ]
      } 
    },
    "tooltip": [
      {
        "field": "properties.CTYUA21NM",
        "type": "nominal",
        "title": "District and/ or County"
      },
      {
        "field": "Average",
        "type": "quantitative",
        "format": ".0f",
        "title": "Average price in pounds"
      },
      {
        "field": "Detached",
        "type": "quantitative",
        "title": "Number sold; Detached"
      },
      {
        "field": "Semi-Detached",
        "type": "quantitative",
        "title": "Number sold; Semi-Detached"
      },
      {
        "field": "Terraced",
        "type": "quantitative",
        "title": "Number sold; Terraced"
      },
      {"field": "Flats", "type": "quantitative", "title": "Number sold; Flats"},
      {"field": "Other", "type": "quantitative", "title": "Number sold; Other"}
    ]
  },
  "config": { "title": { "font": "sans-serif", "fontSize": 14 } }
}